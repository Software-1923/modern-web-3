const c=require("express"),l=require("express-ws"),e=c();l(e);const i=require("path"),a=require("fs"),p={}.PORT||3001;e.use(c.static(i.join(__dirname,"dist")));e.get("/",(s,n)=>{n.sendFile(i.join(__dirname,"public","html","index.html"))});e.get("/:page",(s,n)=>{const r=s.params.page,t=i.join(__dirname,"public","html",r);a.access(t,a.constants.F_OK,o=>o?n.sendFile(i.join(__dirname,"dist","error-page","404.html")):n.sendFile(t))});e.use("/activate-next-app",(s,n)=>{const r=require("./next-app");r.prepare().then(()=>{e.get("*",(t,o)=>r.getRequestHandler()(t,o)),console.log("Next.js application is enabled.")})});e.ws("/web3",(s,n)=>{s.on("message",r=>{console.log(`Received message: ${r}`),s.send("Response from Web 3 server")})});e.listen(p,()=>{console.log(`Server is running on port ${p}.`)});
